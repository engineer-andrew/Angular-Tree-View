/*!
 * angular-tree-view
 * https://github.com/engineer-andrew/Angular-Tree-View
 * Version: 1.0.0 - 2016-10-18T19:35:00.000Z
 * License: GPL-3.0
 */
angular.module("ea.treeview",[]),angular.module("ea.treeview").directive("eaTreeView",["eaTreeViewFactory",function(e){return{controller:["$scope",function(e){this.isRoot=e.isRoot}],link:{pre:function(t){e.setItemTemplateUrl(t.itemTemplateUrl)},post:function(e,t,a){e.branchName=e.branchName||"items",e.callback=e.callback()}},restrict:"E",scope:{branchName:"@",callback:"&",datasetId:"=",isRoot:"@",items:"=",itemTemplateUrl:"@"},template:'<ea-tree-view-item dataset-id="datasetId" item="item" branch-name="{{branchName}}" callback="callback" data-ng-repeat="item in items"></ea-tree-view-item>'}}]),angular.module("ea.treeview").factory("eaTreeViewFactory",["$rootScope",function(e){var t={items:{}},a={bindEvent:function(t,i){t=t||"$stateChangeSuccess",i=i||"default",e.$on(t,function(e,t){a.setActive(t.name,i)})},getItems:function(e){return e=e||"default",t.items[e]},getItemTemplateUrl:function(){return t.itemTemplateUrl},resetItemTemplateUrl:function(){t.itemTemplateUrl=null},setActive:function(e,i,n,r,c,l){i=i||"default",n=n||t.items[i],r=r||!1,c=c||0;for(var m=n.length;--m>=0;)n[m].items&&n[m].items.length?(r=a.setActive(e,i,n[m].items,r,c+1,l),r&&!l&&(n[m].expanded=!0,0===c&&(l=!0))):r?n[m].isActive=!1:n[m].stateName&&n[m].stateName===e?(n[m].isActive=!0,r=!0):n[m].isActive=!1;return r},setItems:function(e,a){a=a||"default",t.items[a]=e},setItemTemplateUrl:function(e){e?t.itemTemplateUrl=e:t.itemTemplateUrl||(t.itemTemplateUrl="treeViewItem.html")}};return a}]),angular.module("ea.treeview").directive("eaTreeViewItem",["eaTreeViewFactory",function(e){return{link:function(t,a,i,n){t.item.items=t.item[t.branchName],t.callback=t.callback(),t.activate=function(){e.setActive(t.item.stateName,t.datasetId),t.callback&&t.callback(t.item)},t.hasChildren=function(){return!!t.item.items&&!!t.item.items.length},t.hasParent=function(){return!n.isRoot},t.toggleExpanded=function(){t.item.expanded=!t.item.expanded}},require:"^eaTreeView",restrict:"E",scope:{branchName:"@",callback:"&",datasetId:"=",item:"="},templateUrl:function(t,a){return e.getItemTemplateUrl()}}}]),angular.module("ea.treeview").run(["$templateCache",function(e){e.put("treeViewItem.html",'<div ng-class="{\'tree-trunk\': !hasParent()}">\r\n    <div data-ng-if="hasChildren()" class="tree-parent" data-ng-class="{\'tree-child\': hasParent()}">\r\n        <div data-ng-click="toggleExpanded()" class="clickable">\r\n            <i class="fa" data-ng-class="{\'fa-chevron-right\': !item.expanded, \'fa-chevron-down\': item.expanded}"></i>\r\n            <span>{{item.display}}</span>\r\n        </div>\r\n        <ea-tree-view data-ng-if="item.expanded" branch-name="{{branchName}}" dataset-id="datasetId" callback="callback" items="item.items"></ea-tree-view>\r\n    </div>\r\n    <div data-ng-if="!hasChildren()" data-ng-click="activate()" class="tree-child clickable" data-ng-class="{active: item.isActive}">{{item.display}}</div>\r\n</div>')}]);